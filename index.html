<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>KeLin (KL) | 我的第一个 ERC20 代币</title>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
  <style>
    body,html{margin:0;height:100%;font-family:'Arial',sans-serif;overflow:hidden;background:#000;color:#fff;}
    #particles-js{position:absolute;width:100%;height:100%;background:#000;}
    .content{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:2;}
    
    /* 终极圆形发光钥匙 Logo */
    .logo{
      width:140px;
      height:140px;
      border-radius:50%;                    /* 强制圆形 */
      object-fit:cover;                     /* 图片填满不变形 */
      border:4px solid #00ff88;             /* 绿边 */
      box-shadow:0 0 30px #00ff88, 0 0 60px rgba(0,255,136,0.5); /* 双层发光 */
      padding:8px;                          /* 让边框和图片有间隙 */
      background:#000;                     /* 背景黑，防止透明漏光 */
      animation:pulse 3s infinite;          /* 呼吸灯效果 */
    }
    @keyframes pulse{
      0%,100%{box-shadow:0 0 30px #00ff88, 0 0 60px rgba(0,255,136,0.5);}
      50%{box-shadow:0 0 40px #00ff88, 0 0 80px rgba(0,255,136,0.8);}
    }
    
    h1{font-size:4.5rem;background:linear-gradient(45deg,#00ff88,#00ccff);-webkit-background-clip:text;color:transparent;margin:20px 0;}
    .tagline{font-size:1.6rem;margin:10px 0;opacity:0.9;}
    .stats{background:rgba(255,255,255,0.1);padding:20px 40px;border-radius:20px;margin:20px 0;backdrop-filter:blur(10px);}
    .btn{padding:15px 40px;margin:10px;background:#00ff88;color:#000;font-weight:bold;border-radius:50px;cursor:pointer;font-size:1.1rem;transition:0.3s;}
    .btn:hover{background:#00cc66;transform:scale(1.05);}
    .btn-connected{background:#333;border:2px solid #00ff88;color:#00ff88;}
    .btn-outline{background:transparent;border:2px solid #00ff88;color:#00ff88;}
    .btn-outline:hover{background:#00ff88;color:#000;}
    .social{margin-top:30px;}
    .social a{margin:0 15px;color:#00ff88;font-size:2rem;transition:0.3s;}
    .social a:hover{transform:scale(1.3);}
    footer{position:absolute;bottom:20px;width:100%;text-align:center;opacity:0.6;font-size:0.9rem;}
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <div class="content">
    <!-- 你的钥匙 Logo 已完美圆形 + 发光 -->
    <img src="preview-image.png" class="logo" alt="KeLin Logo">

    <h1>KeLin</h1>
    <p class="tagline">我的第一个 ERC20 代币 · 总供应 100,000,000 KL</p>

    <div class="stats">
      <p>合约地址: <span id="contract">0xEE30...4f4E</span> 
        <span onclick="copyAddress()" style="cursor:pointer;color:#00ff88;">[复制]</span>
      </p>
      <p>网络: Ethereum Sepolia 测试网</p>
      <p id="balance">点击下方按钮连接钱包</p>
    </div>

    <div>
      <button id="connectBtn" class="btn" onclick="connectWallet()">连接钱包</button>
      <a href="https://sepolia.etherscan.io/address/0xEE303830d908Ac67CDC15e8D2257447C5E6B4f4E" target="_blank" class="btn btn-outline">Etherscan</a>
      <a href="https://app.uniswap.org/#/swap?chain=sepolia&outputCurrency=0xEE303830d908Ac67CDC15e8D2257447C5E6B4f4E" target="_blank" class="btn btn-outline">Uniswap</a>
    </div>

    <div class="social">
      <a href="https://twitter.com/yourhandle" target="_blank">Twitter</a>
      <a href="https://t.me/yourgroup" target="_blank">Telegram</a>
      <a href="https://github.com/ckl-coder/KeLin-Token" target="_blank">GitHub</a>
    </div>
  </div>

  <footer>
    © 2025 KeLin Token • Made with ❤️ by ckl-coder
  </footer>

  <script>
    particlesJS("particles-js", {"particles":{"number":{"value":80},"color":{"value":"#00ff88"},"shape":{"type":"circle"},"opacity":{"value":0.5},"size":{"value":3},"move":{"enable":true,"speed":2}},"interactivity":{"detect_on":"canvas","events":{"onhover":{"enable":true,"mode":"repulse"}}}});

    let currentProvider = null;
    let currentAccount = null;
    const connectBtn = document.getElementById("connectBtn");

    function copyAddress() {
      navigator.clipboard.writeText("0xEE303830d908Ac67CDC15e8D2257447C5E6B4f4E");
      alert("合约地址已复制！");
    }

    async function connectWallet() {
      const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      if (isMobile) {
        window.location.href = `https://link.trustwallet.com/open_url?coin_id=60&url=${window.location.href}`;
        return;
      }
      if (window.ethereum) {
        await connectWithProvider(window.ethereum);
      } else {
        alert("未检测到钱包扩展\n请安装 MetaMask");
      }
    }

    async function connectWithProvider(provider) {
      try {
        const accounts = await provider.request({ method: 'eth_requestAccounts' });
        currentProvider = provider;
        currentAccount = accounts[0];
        connectBtn.textContent = "切换钱包";
        connectBtn.className = "btn btn-connected";
        await showBalance(provider);
      } catch (e) {
        alert("连接被拒绝");
      }
    }

    async function showBalance(provider) {
      const web3 = new Web3(provider);
      document.getElementById("balance").innerHTML = `钱包地址: ${currentAccount.slice(0,8)}...${currentAccount.slice(-6)}`;
      const token = new web3.eth.Contract([{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}], "0xEE303830d908Ac67CDC15e8D2257447C5E6B4f4E");
      try {
        const balance = await token.methods.balanceOf(currentAccount).call();
        document.getElementById("balance").innerHTML += `<br>KL 余额: ${(balance / 1e18).toFixed(4)} KL`;
      }  catch (e) {
        document.getElementById("balance").innerHTML += "<br>读取失败（请切换到 Sepolia）";
      }
    }
  </script>
</body>
</html>